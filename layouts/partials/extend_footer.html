<script src="https://cdn.jsdelivr.net/npm/tsparticles-confetti@2.10.1/tsparticles.confetti.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles-preset-triangles@2/tsparticles.preset.triangles.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tsparticles/2.11.1/tsparticles.bundle.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

<div id="tsparticles" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;"></div>

<script>
document.addEventListener("DOMContentLoaded", function() {

    // 1. SPOTLIGHT BORDER TRACKING (Kept this for the Gold Effect)
    const cards = document.querySelectorAll('.post-entry');
    document.onmousemove = e => {
        for(const card of cards) {
            const rect = card.getBoundingClientRect(),
                  x = e.clientX - rect.left,
                  y = e.clientY - rect.top;
            card.style.setProperty("--mouse-x", `${x}px`);
            card.style.setProperty("--mouse-y", `${y}px`);
        };
    }

    // 2. MAGNETIC BUTTONS (Physics)
    const buttons = document.querySelectorAll('button, .button, .profile .buttons a');
    buttons.forEach(btn => {
        btn.addEventListener('mousemove', function(e) {
            const rect = btn.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            btn.style.transform = `translate(${x * 0.25}px, ${y * 0.25}px)`;
        });
        btn.addEventListener('mouseleave', function() { btn.style.transform = 'translate(0px, 0px)'; });
    });

    // 3. TYPEWRITER SUBTITLE
    const subtitle = document.querySelector('.profile .subtitle');
    if (subtitle) {
        const text = subtitle.innerText;
        subtitle.innerText = "";
        let i = 0;
        function typeWriter() {
            if (i < text.length) {
                subtitle.innerHTML += text.charAt(i);
                i++;
                setTimeout(typeWriter, 50);
            }
        }
        setTimeout(typeWriter, 1200);
    }

    // 4. INK PARTICLES
    tsParticles.load("tsparticles", {
        particles: {
            number: { value: 20 },
            color: { value: "#0E1A2B" },
            opacity: { value: 0.1 },
            size: { value: 2 },
            line_linked: { enable: true, distance: 180, color: "#0E1A2B", opacity: 0.05 },
            move: { enable: true, speed: 0.6 }
        },
        interactivity: {
            detect_on: "window",
            events: { onhover: { enable: true, mode: "grab" } },
            modes: { grab: { distance: 200, line_linked: { opacity: 0.2 } } }
        }
    });

    // 5. 3D TILT
    VanillaTilt.init(document.querySelectorAll('.post-entry, .profile img'), {
        max: 3, speed: 400, glare: true, "max-glare": 0.2, scale: 1.02
    });

    // 6. SCROLL REVEAL
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                setTimeout(() => { entry.target.classList.add('slide-in-active'); }, 100 * index);
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });
    document.querySelectorAll('.post-entry').forEach(card => observer.observe(card));
});
</script>